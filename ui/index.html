<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FiveM Notification</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <style>
        body {
            margin: 0;
            padding: 0;
            background: transparent; /* Transparent background */
            display: none; /* Hidden initially */
        }
    </style>
</head>
<body>

    <!-- Notification Box -->
    <div id="notificationBox" class="fixed top-4 right-4 bg-gray-800 text-white shadow-lg rounded-lg p-4 w-96 hidden">
        <div class="flex items-start space-x-4">
            <!-- Icon -->
            <div class="flex-shrink-0">
                <img id="notificationIcon" src="" alt="Icon" class="h-12 w-12 rounded-full">
            </div>
            <!-- Notification Content -->
            <div class="flex-1">
                <!-- Notification Title -->
                <h4 id="notificationTitle" class="text-lg font-semibold text-red-500"></h4>
                <!-- Notification Subtitle -->
                <p id="notificationSubtitle" class="text-yellow-300"></p>
                <!-- Player Info -->
                <p id="playerName" class="text-sm"></p>
                <p class="text-sm">
                    Coords: <span id="playerCoords"></span>
                </p>
            </div>
        </div>
        <!-- Optional Close Button -->
        <button class="absolute top-2 right-2 text-gray-400 hover:text-white" onclick="closeNotification()">
            &times;
        </button>
    </div>

    <script>
        // Function to toggle the notification box display
        function display(bool) {
            if (bool) {
                $("body").fadeIn("slow");
                $("#notificationBox").fadeIn("slow");
            } else {
                $("#notificationBox").fadeOut("slow", function() {
                    $("body").fadeOut("slow");
                });
            }
        }

        // Listen for messages from Lua script
        window.addEventListener('message', function(event) {
            var item = event.data;

            if (item.action === "showPanicNotification") {
                // Update the notification box content
                SetNotificationMessage(
                    item.icon,
                    item.title,
                    item.subtitle,
                    item.playerName,
                    item.playerCoords
                );
                display(true); // Show the notification
            }
        });

        // Function to set the notification message content
        function SetNotificationMessage(icon, title, subtitle, playerName, playerCoords) {
            $("#notificationIcon").attr("src", icon);
            $("#notificationTitle").text(title);
            $("#notificationSubtitle").text(subtitle);
            $("#playerName").text(`Player: ${playerName}`);
            $("#playerCoords").text(`X: ${playerCoords.x}, Y: ${playerCoords.y}, Z: ${playerCoords.z}`);
        }

        // Function to close the notification
        function closeNotification() {
            display(false);
        }

        // // Simulate Lua message for testing
        // function simulateLuaMessage() {
        //     // Example data to simulate Lua message
        //     var testData = {
        //         action: "showPanicNotification",
        //         icon: "https://via.placeholder.com/50", // Custom icon URL
        //         title: "Test Panic Button",
        //         subtitle: "Test Subtitle",
        //         playerName: "Test Player",
        //         playerCoords: { x: 123.45, y: 678.90, z: 12.34 } // Example coordinates
        //     };

        //     // Send the simulated message to the HTML page
        //     window.dispatchEvent(new MessageEvent('message', { data: testData }));
        // }

        // // Call the function to simulate the Lua message on page load
        // window.onload = function() {
        //     simulateLuaMessage();
        // };
    </script>
</body>
</html>
